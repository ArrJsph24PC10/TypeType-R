{"version":3,"file":"static/js/989.e5eb49af.chunk.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,KAAM,CAAAA,kBAAkB,CAAGA,CACzBC,WAAmB,CACnBC,sBAAqD,GAClD,CACH,KAAM,CAAAC,wBAAwB,CAAG,CAC/B,KAAK,CACL,IAAI,CACJ,MAAM,CACN,IAAI,CACJ,IAAI,CACJ,KAAK,CACL,GAAG,CACH,IAAI,CACL,CAED,KAAM,CAAAC,WAAqB,CAAG,EAAE,CAChCD,wBAAwB,CAACE,OAAO,CAAEC,MAAM,EAAK,CAC3C,KAAM,CAAAC,qBAAqB,CAAGN,WAAW,CAAGK,MAAM,CAClD,GAAIJ,sBAAsB,CAACM,GAAG,CAACD,qBAAqB,CAAC,CAAE,CACrDH,WAAW,CAACK,IAAI,CAACF,qBAAqB,CAAC,CACzC,CACF,CAAC,CAAC,CAEF,GAAIN,WAAW,CAACS,QAAQ,CAAC,GAAG,CAAC,CAAE,CAC7B,GAAIR,sBAAsB,CAACM,GAAG,CAACP,WAAW,CAACU,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAAG,KAAK,CAAC,CAAE,CAChEP,WAAW,CAACK,IAAI,CAACR,WAAW,CAACU,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAAG,KAAK,CAAC,CACpD,CACF,CAEA,MAAO,CAAAP,WAAW,CACpB,CAAC,CAED,mEAAeJ,kBAAkB;;;;;;;;;;;;ACfjC,KAAM,CAAA+B,MAAM,CAAGC,IAAA,EAIF,IAJG,CACd9B,sBAAsB,CACtB+B,4BAA4B,CAC5BC,oBACK,CAAC,CAAAF,IAAA,CACN,KAAM,CAAAG,QAAQ,CAAGhB,oCAAW,CAAC,CAAC,CAC9B,KAAM,CAAAiB,OAAO,CAAGlB,mCAAU,CAAC,CAAC,CAE5B,KAAM,CAACmB,UAAU,CAAEC,aAAa,CAAC,CAAGtB,kBAAQ,CAC1C,SAAAuB,oBAAA,QAAAA,oBAAA,CAAM,GAAI,CAAAC,eAAe,CAACL,QAAQ,CAACM,MAAM,CAAC,CAACjC,GAAG,CAAC,GAAG,CAAC,UAAA+B,oBAAA,UAAAA,oBAAA,CAAI,EAAE,EAC3D,CAAC,CAED,KAAM,CAAAG,kBAAkB,CAAG5B,iBAAO,CAChC,IACEY,2BAAQ,CAAEiB,CAAS,EAAK,CACtB,KAAM,CAAAF,MAAM,CAAGE,CAAC,GAAK,EAAE,CAAGC,SAAS,CAAG,MAAMD,CAAC,EAAE,CAC/CP,OAAO,CAACS,OAAO,CAAC,CAAEJ,MAAM,CAAEK,IAAI,CAAEV,OAAO,CAACD,QAAQ,CAACW,IAAK,CAAC,CAAC,CAC1D,CAAC,CAAE,GAAG,CAAC,CACT,CAACV,OAAO,CACV,CAAC,CAED,KAAM,CAAAW,YAAY,CAAGvB,kCAAY,CAACC,2CAAiB,CAAC,CACpD,KAAM,CAAEuB,0BAA0B,CAAEC,sBAAuB,CAAC,CAC1D1B,2CAAa,CAAC,CAAC,CACjB,KAAM,CAAC2B,WAAW,CAAEC,cAAc,CAAC,CAAGnC,kBAAQ,CAC5CoC,aAAsB,CAAG,SAC3B,CAAC,CACD,KAAM,CAAAG,WAAW,CAAGxC,gBAAM,CAAqB,IAAI,CAAC,CACpD,KAAM,CAACyC,aAAa,CAAEC,cAAc,CAAC,CAAGzC,kBAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAC0C,eAAe,CAAEC,kBAAkB,CAAC,CAAG3C,kBAAQ,CAAW,EAAE,CAAC,CAEpEH,mBAAS,CAAC,IAAM,KAAA+C,oBAAA,CACd,CAAAA,oBAAA,CAAAL,WAAW,CAACM,OAAO,UAAAD,oBAAA,iBAAnBA,oBAAA,CAAqBE,KAAK,CAAC,CAAC,CAC9B,CAAC,CAAE,EAAE,CAAC,CAENjD,mBAAS,CAAC,IAAM,CACd6B,kBAAkB,CAACqB,kBAAkB,CAAC1B,UAAU,CAAC,CAAC,CACpD,CAAC,CAAE,CAACA,UAAU,CAAEK,kBAAkB,CAAC,CAAC,CAEpC7B,mBAAS,CAAC,IAAM,CACd,GAAI2C,aAAa,CAACQ,MAAM,CAAG,CAAC,CAAE,CAC5BL,kBAAkB,CAChB3D,4BAAkB,CAACwD,aAAa,CAAEtD,sBAAsB,CAC1D,CAAC,CACH,CAAC,IAAM,CACLyD,kBAAkB,CAAC,EAAE,CAAC,CACxB,CACF,CAAC,CAAE,CAACH,aAAa,CAAEtD,sBAAsB,CAAC,CAAC,CAE3C,KAAM,CAAA+D,qBAAqB,CAAIC,MAAc,EAAK,CAChD5B,aAAa,CAAC4B,MAAM,CAAC,CACrB,KAAM,CAAAC,aAAa,CAAGJ,kBAAkB,CAACG,MAAM,CAAC,CAChDf,cAAc,CAACC,aAAsB,CAAG,YAAY,CAAGe,aAAa,CAAC,CACvE,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAAC,KAAK,CAAGX,eAAe,CAAC/C,KAAK,CAAC,CAAC,CACrC0D,KAAK,CAACC,OAAO,CAACd,aAAa,CAAC,CAE5B,KAAM,CAAAe,aAA2C,CAAGF,KAAK,CACtDG,GAAG,CAAEC,IAAI,EAAK,CACb,GAAIvE,sBAAsB,CAACM,GAAG,CAACiE,IAAI,CAAC,CAAE,CACpC,MAAO,CACLP,MAAM,CAAEO,IAAI,CACZC,MAAM,CAAExE,sBAAsB,CAACM,GAAG,CAACiE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC/C,CAAC,CACH,CAAC,IAAM,CACL,MAAO,CAAA7B,SAAS,CAClB,CACF,CAAC,CAAC,CACD+B,MAAM,CAAEC,YAAY,EAAK,CAAC,CAACA,YAAY,CAAC,CAE3C,KAAM,CAAAC,QAAwB,CAAGN,aAA+B,CAEhEtB,sBAAsB,CAAC4B,QAAQ,CAAC,CAClC,CAAC,CAED,KAAM,CAAAC,uBAAuB,CAAGtB,aAAa,CAACQ,MAAM,CAAG,CAAC,CAExD,mBACElC,oBAAA,SAAMiD,EAAE,CAAC,MAAM,CAAAC,QAAA,eACblD,oBAAA,CAACR,wBAAS,EAAA0D,QAAA,eACRpD,mBAAA,QAAKqD,SAAS,CAAC,sBAAsB,CAAAD,QAAA,cACnCpD,mBAAA,WAAQqD,SAAS,CAAC,4BAA4B,CAAAD,QAAA,cAC5CpD,mBAAA,OAAIsD,GAAG,CAAE3B,WAAY,CAAC4B,QAAQ,CAAE,CAAC,CAAE,CAAAH,QAAA,CAAC,QAEpC,CAAI,CAAC,CACC,CAAC,CACN,CAAC,cACNpD,mBAAA,QAAKqD,SAAS,CAAC,WAAW,CAAAD,QAAA,cACxBpD,mBAAA,CAACX,6BAAI,EACHmE,EAAE,CAAEN,uBAAuB,CAAG,uBAAuB,CAAG,GAAI,CAC5DO,OAAO,CAAEP,uBAAuB,CAAGV,iBAAiB,CAAGxB,SAAU,CACjEqC,SAAS,CAAE,+CACTH,uBAAuB,CAAG,EAAE,CAAG,OAAO,EACrC,CAAAE,QAAA,CACJ,sBAED,CAAM,CAAC,CACJ,CAAC,EACG,CAAC,cACZpD,mBAAA,QACEqD,SAAS,CAAC,4BAA4B,CACtC,cAAY,sBAAsB,CAAAD,QAAA,cAElClD,oBAAA,QAAKmD,SAAS,CAAC,gCAAgC,CAAAD,QAAA,eAC7ClD,oBAAA,QAAKmD,SAAS,CAAC,sCAAsC,CAAAD,QAAA,eACnDpD,mBAAA,QAAAoD,QAAA,cACEpD,mBAAA,CAACR,8BAAe,EACdkE,uBAAuB,CAAEtC,0BAA2B,CACpD9C,sBAAsB,CAAEA,sBAAuB,CAC/C+B,4BAA4B,CAAEA,4BAA6B,CAC3DI,UAAU,CAAEA,UAAW,CACvBkD,QAAQ,CAAEtB,qBAAsB,CAChC/B,oBAAoB,CAAEA,oBAAqB,CAC3CsD,WAAW,CAAE/B,cAAe,CAC5BV,YAAY,CAAEA,YAAa,CAC5B,CAAC,CACC,CAAC,cACNjB,oBAAA,QAAKmD,SAAS,CAAC,EAAE,CAAAD,QAAA,eACflD,oBAAA,QAAKmD,SAAS,CAAC,KAAK,CAAAD,QAAA,eAClBpD,mBAAA,OAAIqD,SAAS,CAAC,IAAI,CAAAD,QAAA,CAAC,YAAU,CAAI,CAAC,cAClCpD,mBAAA,MAAGqD,SAAS,CAAC,cAAc,CAAAD,QAAA,cACzBlD,oBAAA,SAAMmD,SAAS,CAAC,UAAU,CAACF,EAAE,CAAC,iBAAiB,CAAAC,QAAA,EAAC,2BACrB,CAAC9B,WAAW,EACjC,CAAC,CACN,CAAC,EACD,CAAC,cACNtB,mBAAA,CAACP,kCAAmB,EAClB4D,SAAS,CAAC,+EAA+E,CACzFQ,KAAK,CAAE,CAAEC,UAAU,CAAE,CAAE,CAAE,CACzBC,mBAAmB,CAAC,kBAAkB,CAAAX,QAAA,CACvC,wBAED,CAAqB,CAAC,EACnB,CAAC,EACH,CAAC,cACNpD,mBAAA,QAAKqD,SAAS,CAAC,uBAAuB,CAAAD,QAAA,cACpClD,oBAAA,QAAAkD,QAAA,eACEpD,mBAAA,MAAGqD,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAAC,qBAAmB,CAAG,CAAC,CACvDtB,eAAe,CAACM,MAAM,CAAG,CAAC,eACzBpC,mBAAA,QAAKqD,SAAS,CAAC,KAAK,CAAAD,QAAA,CAAEtB,eAAe,CAACkC,IAAI,CAAC,IAAI,CAAC,CAAM,CACvD,EACE,CAAC,CACH,CAAC,EACH,CAAC,CACH,CAAC,EACF,CAAC,CAEX,CAAC,CAED,oDAAe7D,MAAM","sources":["pages/lookup/utilities/getWordFamilyGroup.ts","pages/lookup/Lookup.tsx"],"sourcesContent":["import type { LookupDictWithNamespacedDicts } from \"../../../types\";\n\nconst getWordFamilyGroup = (\n  trimmedWord: string,\n  globalLookupDictionary: LookupDictWithNamespacedDicts\n) => {\n  const commonFamilyGroupEndings = [\n    \"ing\",\n    \"ed\",\n    \"ment\",\n    \"'s\",\n    \"ly\",\n    \"ion\",\n    \"s\",\n    \"er\",\n  ];\n\n  const familyGroup: string[] = [];\n  commonFamilyGroupEndings.forEach((ending) => {\n    const trimmedWordPlusEnding = trimmedWord + ending;\n    if (globalLookupDictionary.get(trimmedWordPlusEnding)) {\n      familyGroup.push(trimmedWordPlusEnding);\n    }\n  });\n\n  if (trimmedWord.endsWith(\"e\")) {\n    if (globalLookupDictionary.get(trimmedWord.slice(0, -1) + \"ing\")) {\n      familyGroup.push(trimmedWord.slice(0, -1) + \"ing\");\n    }\n  }\n\n  return familyGroup;\n};\n\nexport default getWordFamilyGroup;\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport StrokesForWords from \"../../components/StrokesForWords\";\nimport PseudoContentButton from \"../../components/PseudoContentButton\";\nimport Subheader from \"../../components/Subheader\";\nimport getWordFamilyGroup from \"./utilities/getWordFamilyGroup\";\n\nimport type { ImportedPersonalDictionaries, MaterialItem } from \"../../types\";\nimport { useAppMethods } from \"../../states/legacy/AppMethodsContext\";\nimport { useAtomValue } from \"jotai\";\nimport { userSettingsState } from \"../../states/userSettingsState\";\nimport debounce from \"../../utils/debounce\";\n\ntype Props = {\n  globalLookupDictionary: any;\n  globalLookupDictionaryLoaded: boolean;\n  personalDictionaries: ImportedPersonalDictionaries;\n};\n\nconst Lookup = ({\n  globalLookupDictionary,\n  globalLookupDictionaryLoaded,\n  personalDictionaries,\n}: Props) => {\n  const location = useLocation();\n  const history = useHistory();\n\n  const [lookupTerm, setLookupTerm] = useState(\n    () => new URLSearchParams(location.search).get(\"q\") ?? \"\"\n  );\n\n  const updateSearchParams = useMemo(\n    () =>\n      debounce((q: string) => {\n        const search = q === \"\" ? undefined : `?q=${q}`;\n        history.replace({ search, hash: history.location.hash });\n      }, 100),\n    [history]\n  );\n\n  const userSettings = useAtomValue(userSettingsState);\n  const { appFetchAndSetupGlobalDict, setCustomLessonContent } =\n    useAppMethods();\n  const [bookmarkURL, setBookmarkURL] = useState(\n    process.env.PUBLIC_URL + \"/lookup\"\n  );\n  const mainHeading = useRef<HTMLHeadingElement>(null);\n  const [trackedPhrase, setTrackPhrase] = useState(\"\");\n  const [wordFamilyGroup, setWordFamilyGroup] = useState<string[]>([]);\n\n  useEffect(() => {\n    mainHeading.current?.focus();\n  }, []);\n\n  useEffect(() => {\n    updateSearchParams(encodeURIComponent(lookupTerm));\n  }, [lookupTerm, updateSearchParams]);\n\n  useEffect(() => {\n    if (trackedPhrase.length > 0) {\n      setWordFamilyGroup(\n        getWordFamilyGroup(trackedPhrase, globalLookupDictionary)\n      );\n    } else {\n      setWordFamilyGroup([]);\n    }\n  }, [trackedPhrase, globalLookupDictionary]);\n\n  const strokesForWordsChange = (phrase: string) => {\n    setLookupTerm(phrase);\n    const encodedPhrase = encodeURIComponent(phrase);\n    setBookmarkURL(process.env.PUBLIC_URL + \"/lookup?q=\" + encodedPhrase);\n  };\n\n  const setUpCustomLesson = () => {\n    const words = wordFamilyGroup.slice();\n    words.unshift(trackedPhrase);\n\n    const maybeMaterial: (undefined | MaterialItem)[] = words\n      .map((word) => {\n        if (globalLookupDictionary.get(word)) {\n          return {\n            phrase: word,\n            stroke: globalLookupDictionary.get(word)[0][0],\n          };\n        } else {\n          return undefined;\n        }\n      })\n      .filter((notUndefined) => !!notUndefined);\n\n    const material: MaterialItem[] = maybeMaterial as MaterialItem[];\n\n    setCustomLessonContent(material);\n  };\n\n  const enabledCustomLessonLink = trackedPhrase.length > 0;\n\n  return (\n    <main id=\"main\">\n      <Subheader>\n        <div className=\"flex mr1 self-center\">\n          <header className=\"flex items-center min-h-40\">\n            <h2 ref={mainHeading} tabIndex={-1}>\n              Lookup\n            </h2>\n          </header>\n        </div>\n        <div className=\"flex mxn2\">\n          <Link\n            to={enabledCustomLessonLink ? \"/lessons/custom/setup\" : \"#\"}\n            onClick={enabledCustomLessonLink ? setUpCustomLesson : undefined}\n            className={`link-button link-button-ghost table-cell mr1${\n              enabledCustomLessonLink ? \"\" : \" o-30\"\n            }`}\n          >\n            Set up custom lesson\n          </Link>\n        </div>\n      </Subheader>\n      <div\n        className=\"p3 mx-auto mw-1024 mh-page\"\n        data-testid=\"lookup-page-contents\"\n      >\n        <div className=\"flex flex-wrap justify-between\">\n          <div className=\"mw-584 w-100 flex-grow mr3 min-h-384\">\n            <div>\n              <StrokesForWords\n                fetchAndSetupGlobalDict={appFetchAndSetupGlobalDict}\n                globalLookupDictionary={globalLookupDictionary}\n                globalLookupDictionaryLoaded={globalLookupDictionaryLoaded}\n                lookupTerm={lookupTerm}\n                onChange={strokesForWordsChange}\n                personalDictionaries={personalDictionaries}\n                trackPhrase={setTrackPhrase}\n                userSettings={userSettings}\n              />\n            </div>\n            <div className=\"\">\n              <div className=\"mt0\">\n                <h3 className=\"h4\">Share link</h3>\n                <p className=\"mb0 truncate\">\n                  <span className=\"py05 dib\" id=\"js-bookmark-url\">\n                    https://didoesdigital.com{bookmarkURL}\n                  </span>\n                </p>\n              </div>\n              <PseudoContentButton\n                className=\"js-clipboard-button button button--secondary table-cell mr2 copy-to-clipboard\"\n                style={{ lineHeight: 2 }}\n                dataClipboardTarget=\"#js-bookmark-url\"\n              >\n                Copy link to clipboard\n              </PseudoContentButton>\n            </div>\n          </div>\n          <div className=\"mt18 mw-336 flex-grow\">\n            <div>\n              <p className=\"mb1 de-emphasized\">Some related words:</p>\n              {wordFamilyGroup.length > 0 && (\n                <pre className=\"fw4\">{wordFamilyGroup.join(\"\\n\")}</pre>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n};\n\nexport default Lookup;\n"],"names":["getWordFamilyGroup","trimmedWord","globalLookupDictionary","commonFamilyGroupEndings","familyGroup","forEach","ending","trimmedWordPlusEnding","get","push","endsWith","slice","React","useEffect","useMemo","useRef","useState","Link","useHistory","useLocation","StrokesForWords","PseudoContentButton","Subheader","useAppMethods","useAtomValue","userSettingsState","debounce","jsx","_jsx","jsxs","_jsxs","Lookup","_ref","globalLookupDictionaryLoaded","personalDictionaries","location","history","lookupTerm","setLookupTerm","_URLSearchParams$get","URLSearchParams","search","updateSearchParams","q","undefined","replace","hash","userSettings","appFetchAndSetupGlobalDict","setCustomLessonContent","bookmarkURL","setBookmarkURL","process","env","PUBLIC_URL","mainHeading","trackedPhrase","setTrackPhrase","wordFamilyGroup","setWordFamilyGroup","_mainHeading$current","current","focus","encodeURIComponent","length","strokesForWordsChange","phrase","encodedPhrase","setUpCustomLesson","words","unshift","maybeMaterial","map","word","stroke","filter","notUndefined","material","enabledCustomLessonLink","id","children","className","ref","tabIndex","to","onClick","fetchAndSetupGlobalDict","onChange","trackPhrase","style","lineHeight","dataClipboardTarget","join"],"sourceRoot":""}